<% card = result[:card] %>
<% owned_quantity = result[:owned_quantity] || 0 %>

<div class="flex gap-3 p-3 bg-background/50 rounded-lg">
  <!-- Card Image -->
  <div class="shrink-0 w-16">
    <img src="<%= card.image_small %>"
         alt="<%= card.name %>"
         class="w-full rounded shadow-sm"
         loading="lazy">
  </div>

  <!-- Card Info -->
  <div class="flex-grow min-w-0">
    <h3 class="font-medium text-white truncate"><%= card.name %></h3>
    <p class="text-xs text-grey-text/70"><%= card.boxset&.name %> (<%= card.boxset&.code %>)</p>
    <p class="text-xs text-grey-text/70">#<%= card.card_number %></p>

    <% if owned_quantity > 0 %>
      <p class="text-xs text-accent-50 mt-1">Owned: <%= owned_quantity %></p>
    <% end %>

    <!-- Price Info -->
    <div class="flex gap-2 mt-1 text-xs">
      <% if card.normal_price.to_f > 0 %>
        <span class="text-grey-text/70">$<%= number_with_precision(card.normal_price, precision: 2) %></span>
      <% end %>
      <% if card.foil_price.to_f > 0 %>
        <span class="text-grey-text/50">Foil: $<%= number_with_precision(card.foil_price, precision: 2) %></span>
      <% end %>
    </div>
  </div>

  <!-- Add Buttons -->
  <div class="shrink-0 flex flex-col gap-1">
    <% if card.non_foil_available? %>
      <button data-action="click->card-scanner#addToCollection"
              data-card-id="<%= card.id %>"
              data-card-uuid="<%= card.card_uuid %>"
              class="px-3 py-1 text-xs bg-accent-50 text-menu rounded hover:bg-accent-50/80 transition cursor-pointer">
        Add
      </button>
    <% end %>
    <% if card.foil_available? %>
      <button data-action="click->card-scanner#addFoilToCollection"
              data-card-id="<%= card.id %>"
              data-card-uuid="<%= card.card_uuid %>"
              class="px-3 py-1 text-xs border border-accent-50 text-accent-50 rounded hover:bg-accent-50/10 transition cursor-pointer">
        Foil
      </button>
    <% end %>
  </div>
</div>
