<div class="mb-24">
  <div class="p-4 border rounded-3xl bg-foreground border-highlight">
    <% if @grouping && @grouping != 'none' && @grouped_cards.present? %>
      <% @grouped_cards.each do |group_name, cards| %>
        <div class="mb-8 last:mb-0">
          <h3 class="mb-4 text-lg font-semibold text-grey-text">
            <%= group_name %> (<%= cards.size %>)
          </h3>

          <div
            class="
              grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3
              lg:grid-cols-4 xl:grid-cols-5
            "
          >
            <% cards.each do |card| %>
              <%= render partial: 'visual_card', locals: { card: card } %>
            <% end %>
          </div>
        </div>
      <% end %>
    <% else %>
      <div
        class="
          grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3
          lg:grid-cols-4 xl:grid-cols-5
        "
      >
        <% @magic_cards.each do |card| %>
          <%= render partial: 'visual_card', locals: { card: card } %>
        <% end %>
      </div>
    <% end %>
  </div>

  <% if @pagy.present? %>
    <div
      class="
        flex flex-row items-center justify-between w-full p-6 mt-6 space-x-4
        border rounded-3xl border-highlight bg-foreground
      "
    >
      <%== @pagy.info_tag() %>
      <%== @pagy.series_nav(link_extra: 'data-turbo-stream="true"') %>
    </div>
  <% end %>
</div>
