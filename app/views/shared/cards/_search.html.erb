<div class='flex-1 w-auto' id='search-form'>
  <%= form_with url: search_path, method: :get, local: false,
    data: {
      controller: 'search-filter',
      action: 'submit->search-filter#submit',
      search_filter_target: 'form',
      search_filter: 'form' } do |form| %>
    <h3 class='mb-2 text-grey-text'>Search</h3>
    <div class='flex flex-row space-x-0'>
      <%= form.text_field :search,
          value: params[:search],
          placeholder: 'Enter card name or type',
          onfocus: "this.select();",
          class: 'w-full border text-grey-text rounded-l-md bg-background border-highlight focus:border-accent-50 focus:ring-accent-50'
      %>
      <%= form.hidden_field :username, value: params[:username] %>
      <%= form.hidden_field :code, value: params[:code] %>
      <%= form.hidden_field :collection_id, value: params[:collection_id] %>
      <%= form.submit 'Search',
          class: 'p-2 bg-background text-grey-text rounded-r-md border border-highlight hover:cursor-pointer hover:bg-gray-700'
      %>
    </div>
    <!-- Multiselect Buttons -->
    <div class="flex flex-row gap-8 mt-4" data-controller="multiselect" >
      <div>
        <h3 class='mb-2 text-grey-text'>Rarity</h3>
        <div class='flex flex-row space-x-2'>
          <% ['mythic', 'rare', 'uncommon', 'common'].each do |rarity| %>
            <button
              type="button"
                data-action="click->multiselect#toggle"
              data-multiselect-target="item"
              data-multiselect-group="rarity"
              data-value="<%= rarity %>"
              class="cursor-pointer rounded-full p-2 border-2 border-transparent hover:border-gray-500 transition"
              >
              <i class='no-tailwind ms ms-cost ml-0 ms-rarity'></i>
            </button>
          <% end %>
        </div>
      </div>
      <div>
        <h3 class="mb-2 text-grey-text">Mana</h3>
        <div class="flex flex-row space-x-2">
          <% ['b', 'u', 'w', 'r', 'g', 'c'].each do |mana| %>
            <button
              type="button"
                data-action="click->multiselect#toggle"
              data-multiselect-target="item"
              data-multiselect-group="mana"
              data-value="<%= mana.upcase %>"
              class="cursor-pointer rounded-full p-2 border-2 border-transparent hover:border-gray-500 transition"
              >
              <i class="no-tailwind ms ms-cost ml-0 <%= "ms-#{mana}" %>"></i>
            </button>
          <% end %>
        </div>
      </div>
    </div>
    <!-- Hidden fields for selected filters -->
    <div id="filter-hidden-fields"></div>
    <p class='mt-2 text-xs text-grey-text'>Search for a card in this boxset</p>
  <% end %>
</div>
