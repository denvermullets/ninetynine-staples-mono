<div class='bg-menu px-4 md:px-12 2xl:px-64' data-controller="mobile-menu">
  <!-- Desktop/Mobile Header -->
  <div class='flex flex-row items-center justify-between h-[72px] text-white'>
    <!-- Logo and Desktop Navigation -->
    <div class='flex flex-row items-center space-x-2 lg:space-x-4'>
      <p class='font-semibold pr-4 md:pr-6'>99 Staples</p>
      <!-- Desktop Navigation -->
      <div class='hidden md:flex flex-row items-center space-x-2 lg:space-x-4'>
        <div class="<%= nav_item_classes('/boxsets') %>">
          <%= link_to 'Boxsets', boxsets_path %>
        </div>
        <% if current_user %>
          <div class="<%= nav_item_classes('/collections/' + current_user.username) %>">
            <%= link_to 'Collections', collection_show_path(current_user.username) %>
          </div>
          <div class="<%= nav_item_classes('/decks/' + current_user.username) %>">
            <%= link_to 'Decks', deck_show_path(current_user.username) %>
          </div>
          <div class="<%= nav_item_classes('/market-movers') %>">
            <%= link_to 'Market Movers', market_movers_path %>
          </div>
        <% else %>
          <p class="<%= nav_item_classes('/collections/') %>">Collections</p>
          <p class="<%= nav_item_classes('/decks') %>">Decks</p>
        <% end %>
      </div>
    </div>
    <!-- Desktop User Actions -->
    <div class='hidden md:flex flex-row space-x-6 items-center'>
      <% if current_user %>
        <% if current_user.role.to_i == 9001 %>
          <div data-controller="admin-menu" class="relative">
            <button data-action="click->admin-menu#toggle" class="cursor-pointer focus:outline-none">
              Admin
            </button>
            <div
              data-admin-menu-target="menu"
              class="absolute right-0 mt-2 hidden flex-col bg-menu border border-gray-700 p-2 rounded shadow-lg z-50 min-w-max"
            >
              <%= button_to 'Ingest Cards', dashboard_ingest_path, method: :post, class: 'cursor-pointer text-left whitespace-nowrap' %>
              <%= button_to 'Ingest Prices', dashboard_ingest_prices_path, method: :post, class: 'cursor-pointer text-left whitespace-nowrap' %>
              <%= button_to 'Backfill Boxset History', dashboard_backfill_boxset_history_path, method: :post, class: 'cursor-pointer text-left whitespace-nowrap' %>
              <%= button_to 'Clear Jobs', dashboard_clear_jobs_path, method: :post, class: 'cursor-pointer text-left whitespace-nowrap' %>
              <%= button_to 'Reset', dashboard_reset_collections_path, method: :post, class: 'cursor-pointer text-left whitespace-nowrap' %>
              <%= link_to 'Mission Control', '/jobs', class: 'cursor-pointer text-left whitespace-nowrap' %>
            </div>
          </div>
        <% end %>
        <%= link_to 'Sign out', logout_path, data: { turbo_method: :delete }, class: 'hover' %>
      <% else %>
        <%= link_to 'Log In', login_path, class: '' %>
      <% end %>
    </div>
    <!-- Mobile Hamburger Button -->
    <button
      data-action="click->mobile-menu#toggle"
      class="md:hidden flex flex-col justify-center items-center w-8 h-8 cursor-pointer focus:outline-none"
      aria-label="Toggle menu"
      >
      <span class="block w-6 h-0.5 bg-white mb-1"></span>
      <span class="block w-6 h-0.5 bg-white mb-1"></span>
      <span class="block w-6 h-0.5 bg-white"></span>
    </button>
  </div>
  <!-- Mobile Menu -->
  <div
    data-mobile-menu-target="menu"
    class="hidden md:hidden flex-col space-y-2 pb-4 text-white border-t border-gray-700"
  >
    <div class="<%= nav_item_classes('/boxsets') %> pt-2">
      <%= link_to 'Boxsets', boxsets_path %>
    </div>
    <% if current_user %>
      <div class="<%= nav_item_classes('/collections/' + current_user.username) %>">
        <%= link_to 'Collections', collection_show_path(current_user.username) %>
      </div>
      <div class="<%= nav_item_classes('/decks/' + current_user.username) %>">
        <%= link_to 'Decks', deck_show_path(current_user.username) %>
      </div>
      <div class="<%= nav_item_classes('/market-movers') %>">
        <%= link_to 'Market Movers', market_movers_path %>
      </div>
      <% if current_user.role.to_i == 9001 %>
        <div class="pt-2 border-t border-gray-700">
          <p class="font-semibold mb-2">Admin</p>
          <%= button_to 'Ingest Cards', dashboard_ingest_path, method: :post, class: 'cursor-pointer text-left block py-1' %>
          <%= button_to 'Ingest Prices', dashboard_ingest_prices_path, method: :post, class: 'cursor-pointer text-left block py-1' %>
          <%= button_to 'Backfill Boxset History', dashboard_backfill_boxset_history_path, method: :post, class: 'cursor-pointer text-left block py-1' %>
          <%= button_to 'Clear Jobs', dashboard_clear_jobs_path, method: :post, class: 'cursor-pointer text-left block py-1' %>
          <%= button_to 'Reset', dashboard_reset_collections_path, method: :post, class: 'cursor-pointer text-left block py-1' %>
          <%= link_to 'Mission Control', '/jobs', class: 'cursor-pointer text-left block py-1' %>
        </div>
      <% end %>
      <div class="pt-2 border-t border-gray-700">
        <%= link_to 'Sign out', logout_path, data: { turbo_method: :delete }, class: 'hover' %>
      </div>
    <% else %>
      <div class="<%= nav_item_classes('/collections/') %>">
        Collections
      </div>
      <div class="<%= nav_item_classes('/decks') %>">
        Decks
      </div>
      <div class="pt-2 border-t border-gray-700">
        <%= link_to 'Log In', login_path, class: '' %>
      </div>
    <% end %>
  </div>
</div>
